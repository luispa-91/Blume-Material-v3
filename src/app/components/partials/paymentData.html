<md-card class="card-simple top-shadow" md-theme="custom">
    <md-card-content>
            <h3> Método de Pago</h3> <br>
            <!-- PayPal Starts Here -->
            <div class="list-title" ng-click="vm.paymentMethod='paypal'" ng-if="vm.paymentMethods.paypal">
              <h4 ng-class="{'success-green':vm.paymentMethod=='paypal'}"> 
                    PayPal  <i class="fab fa-cc-paypal"></i>
                    <small ng-if="vm.paymentMethod=='paypal'" class="success-green"> Para pagar con PayPal haga click en Finalizar Compra.</small>
              </h4>
            </div>
            <form id="PaypalPost" name="PaypalPost" action="https://www.paypal.com/cgi-bin/webscr" method="post">
                <input type="hidden" name="business" value="{{vm.paymentMethods.paypal.account}}">
                <input type="hidden" name="cmd" value="_xclick">
                <input type="hidden" name="item_name" value="{{vm.payment.orderId}}">
                <input type="hidden" name="amount" value="{{vm.payment.amount}}">
                <input type="hidden" name="currency_code" value="{{vm.currency.value}}">
            </form>
            <!-- BAC Payments Start Here -->
            <div class="list-title" ng-click="vm.paymentMethod='bacsanjose'" ng-if="vm.paymentMethods.bac">
                <h4 ng-class="{'success-green':vm.paymentMethod=='bacsanjose'}">
                    Tarjeta de Crédito <i class="fa fa-credit-card"></i> &nbsp;
                </h4>
            </div>
            <div layout="row" ng-if="vm.paymentMethod=='bacsanjose'">
                <div flex="25" hide-xs></div>
                <div flex>
                    <form 
                        id="CredomaticPost" 
                        name="CredomaticPost" 
                        action="https://credomatic.compassmerchantsolutions.com/api/transact.php" 
                        method="post">
                    <div>
                    <div class="form-group c-c">
                        <md-input-container class="md-block">
                            <label>Número de tarjeta</label>
                            <input style="margin-top:10px" type="text" ng-model="vm.payment.card.number" />
                        </md-input-container>
                    </div>
                    <div class="form-group c-c">
                        <md-input-container class="md-block">
                            <md-select ng-model="vm.payment.card.expMonth">
                            <label>Mes</label>
                                <md-option ng-repeat="month in vm.months" ng-value="month">
                                {{month}}
                                </md-option>
                            </md-select>
                        </md-input-container>
                        <br>
                    </div>
                    <div class="form-group c-c">
                        <md-input-container class="md-block">
                            <md-select ng-model="vm.payment.card.expYear">
                            <label>Año</label>
                                <md-option ng-repeat="year in vm.years" ng-value="year">
                                {{year}}
                                </md-option>
                            </md-select>
                        </md-input-container>
                        <br>
                    </div>
                    <div class="form-group c-c">
                        <md-input-container class="md-block">
                            <label>CVC</label>
                            <input style="margin-top:10px" type="text" ng-model="vm.payment.card.cvc" />
                        </md-input-container>
                    </div>
                    </div>
                    <input type="hidden" name="hash" value="{{vm.paymentMethods.bac.hash}}" />
                    <input type="hidden" name="time" value="{{vm.paymentMethods.bac.timestamp}}" />
                    <input type="hidden" name="amount" value="{{vm.payment.amount}}" />
                    <input type="hidden" name="ccexp" value="{{vm.payment.card.expDate}}" />
                    <input type="hidden" name="type" value="sale" />
                    <input type="hidden" name="orderid" value="{{vm.payment.orderId}}" />
                    <input type="hidden" name="key_id" value="{{vm.paymentMethods.bac.keyId}}" />
                    <input type="hidden" name="processor_id" value="{{vm.paymentMethods.bac.processorId}}" />
                    <input type="hidden" name="address" value="San Jose, Costa Rica" />
                    <input type="hidden" name="redirect" value="{{vm.paymentMethods.bac.returnUrl}}" />
                </form>
                <div class="center-block text-center"><span style="color:darkred">{{vm.errorMessage}}</span></div>
            </div>
            <div flex="25" hide-xs></div>
        </div>
        <!-- Money Transfers Start Here -->
        <div class="list-title" ng-click="vm.paymentMethod='moneytransfer'" ng-if="vm.paymentMethods.bankAccounts.length>0">
            <h4 ng-class="{'success-green':vm.paymentMethod=='moneytransfer'}">
                Transferencia <i class="fas fa-file-import"></i> 
                <small ng-if="vm.paymentMethod=='moneytransfer'" class="success-green"> Para pagar con una transferencia envía la imagen del comprobante y haz click en Finalizar Compra.</small>
            </h4>
        </div>
        <div layout="row" layout-align="center center">
            <div ng-if="vm.paymentMethod=='moneytransfer'" class="center-block text-center">
                <h2>Tu orden ha sido creada!</h2>
                <p>Para pagar tu orden, deposita el monto total de la compra 
                    <span ng-if="::vm.paymentMethods.bankAccounts.length==1">a la siguiente cuenta:</span>
                    <span ng-if="::vm.paymentMethods.bankAccounts.length>1">a una de las siguientes cuentas:</span>
                    <br />
                    <div layout="row">
                        <div flex ng-repeat="bankAccount in vm.paymentMethods.bankAccounts">
                            <strong>Banco</strong> {{bankAccount.bankName}}<br />
                            <strong>Cuenta</strong> {{bankAccount.account}}<br />
                            <strong>Cuenta Cliente</strong> {{bankAccount.longAccount}}<br />
                            <strong>Nombre</strong> {{bankAccount.owner}}<br />
                            <strong>Cédula</strong> {{bankAccount.ownerDocumentId}}<br />
                            <strong>Moneda</strong> {{bankAccount.currency}}<br />
                        </div>
                    </div>
                </p>
                <p>Una vez realizado el pago, toma una foto del comprobante y adjúntala a la factura con el botón de enviar comprobante. </p>

                <md-button class="md-button md-raised md-primary custom"><i class="fas fa-paper-plane"></i>&nbsp; Enviar comprobante</md-button>
            </div>
        </div>
        <!-- Terms and Conditions -->
        <div class="center-block text-center">
			<br>
			<md-checkbox id="PrivacyPolicy" ng-model="vm.acceptedPrivacyPolicy" aria-label="Privacy Policy">	   
			</md-checkbox>
			Leí y acepto las <a href="#" onClick="window.open('politica-de-privacidad','pagename','resizable,height=600,width=400,left=200,top=50'); return false;">Políticas de Privacidad</a>
			<br>
        </div>
        <!-- Complete Payment -->
        <md-card-actions layout="row" layout-align="center center">
            <md-button class="pull-left sm-margin-left" ui-sref="cartReview"><i class="fa fa-chevron-left"></i>&nbsp; Volver</md-button>
            <md-button class="md-raised md-primary buttons-margin custom" ng-disabled="btnProceed" ng-click="vm.makePayment()">
                <span ng-show="!vm.saving"><i class="fa fa-check"></i>&nbsp; Finalizar Compra</span>
                <span ng-show="vm.saving"><i class="fa fa-spinner fa-spin"></i></span>
            </md-button>
        </md-card-actions>
    </md-card-content>
</md-card>