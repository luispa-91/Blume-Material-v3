<md-card class="card-simple top-shadow card-decoration" md-theme="custom">
 <md-card-title>
	 <md-card-title-text>
		 <span class="upper-text">2. Datos del Envío
		 	<div class="pull-right" style="margin-bottom:5px">
		 		<div ng-if="vm.store.payment_options.twocheckout || vm.store.payment_options.bacsanjose">
		 			<img src="assets/images/visa.svg" class="card-logo" />
			        <img src="assets/images/mastercard.svg" class="card-logo" />
			        <img src="assets/images/discover.svg" class="card-logo" />
			        <img src="assets/images/amex.svg" class="card-logo" />
		 		</div>
		 		<div ng-if="vm.store.payment_options.fttechnologies || vm.store.payment_options.banconacional">
		 			<img src="assets/images/bancoNacional.png" class="card-logo" />
              		<img src="assets/images/correosDeCostaRica.png" class="card-logo" />
		 			<img src="assets/images/visa.svg" class="card-logo" />
			        <img src="assets/images/mastercard.svg" class="card-logo" />
		 		</div>
	 		</div>
		 </span> 
		 <md-divider></md-divider>
	 </md-card-title-text>
 </md-card-title>
 <md-card-content>
	 <!--Customer information-->
	 <h4 class="dgrey">Contacto</h4>
	 <br />
	 <div class="row">
		 <div class="col-md-12">
		 	<div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
					<label>Nombre Completo</label>
					<input ng-model="vm.customer.full_name" >
				</md-input-container>
			 </div>
			 <!-- <div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
					<label>Cédula</label>
					<input ng-model="vm.documentId" />
				</md-input-container>
		 	</div> -->
			<div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
					<label>Correo Electrónico</label>
					<input ng-model="vm.customer.email" type="email">
				</md-input-container>
			</div>
			<div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
					<label>Teléfono</label>
					<input ng-model="vm.customer.phone" >
				</md-input-container>
			</div>
		 </div>
	 </div> 
	 <!--Delivery Information-->
	 <div class="center-block text-center">
		
	 	<md-checkbox ng-disabled="vm.store_fares.length == 0 || vm.export" ng-if="vm.store.has_pickup_in_store" id="chkPickup" ng-model="vm.pickup_in_store" ng-change="vm.toggleDelivery(vm.pickup_in_store)" aria-label="Checkbox 2">
			Recoger en la tienda 
		 </md-checkbox>
		 <md-checkbox ng-disabled="vm.pickup_in_store" ng-if="vm.store_fares.length > 0 && vm.has_international_shipping" id="chkPickup" ng-model="vm.export" ng-change="vm.toggleExport()" aria-label="Checkbox 3">
			Envío internacional
		 </md-checkbox>
	 </div>

	 <h4 class="dgrey">Dirección</h4>
	 
	 <div class="row" ng-show="!vm.pickup_in_store && !vm.export && vm.useMap">
		
		<div class="col-md-12">
			<div class="form-group">
			   <md-input-container class="md-block" flex-gt-sm>
				   <label>Provincia</label>
				   <input ng-model="vm.address.country">
			   </md-input-container>
			</div>
		   <div class="form-group">
			   <md-input-container class="md-block" flex-gt-sm>
				   <label>Cantón</label>
				   <input ng-model="vm.address.state" type="text">
			   </md-input-container>
		   </div>
		   <div class="form-group">
			   <md-input-container class="md-block" flex-gt-sm>
				   <label>Distrito</label>
				   <input ng-model="vm.address.city">
			   </md-input-container>
		   </div>
			 <div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
					<label>Dirección Exacta</label>
          			<textarea ng-model="vm.address.address" md-maxlength="300" rows="5" ></textarea>
				</md-input-container>
			</div>
		</div>

		<div class="container-fluid">
			<!-- START fares section -->
			<section>
				<h4>Transporte 
					&nbsp;<small>Distancia aproximada: {{vm.destination_coords.distance}} Kms | {{cart.getTotalWeight()}} Kgs</small>
				</h4><br />
				 <div class="form-group">
			 		<md-radio-group ng-model="vm.destination_coords.selected_fare" ng-change="vm.changeDeliveryCompany()">
				      <md-radio-button ng-repeat="fare in vm.store_fares" value="{{fare.id}}">
				      	<span ng-if="fare.delivery_company">{{fare.delivery_company}} <img ng-if="fare.delivery_company_name=='correosdecostarica'" src="assets/images/correos.png" style="width:auto;height:30px;" /> </span> 
				      	<span ng-if="!fare.delivery_company">{{fare.delivery_company_name}} </span>
				      	<span ng-show="vm.destination_coords.selected_fare == fare.id">
				      		<small class="text-muted" ng-if="vm.store.currency == 'USD'">
					      		{{ cart.getShipping() | currency }} | Tiempo de entrega {{fare.eta}} (approx)
					      	</small>
					      	<small class="text-muted" ng-if="vm.store.currency == 'CRC'">
					      		{{ cart.getShipping() | currency:'₡' }} | Tiempo de entrega {{fare.eta}} (approx)
					      	</small>
				      	</span>
				      </md-radio-button>
				    </md-radio-group>
				</div>
			</section>
		</div>

	 </div>
	 

	 <div class="row" ng-show="vm.pickup_in_store && !vm.store.payment_gateways.twocheckout">
		 <div class="col-md-12">
			 <h4>Comentarios</h4>

		 	<div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
          			<textarea ng-model="vm.billing_address.address" placeholder="Escriba aquí sus comentarios o pedidos especiales"  md-maxlength="150" rows="5" ></textarea>
				</md-input-container>
			</div>
		 </div>
	 </div>

	 <div class="row" ng-show="vm.export">
		 <div class="col-md-12">
			 <h4>Billing Address</h4>
			 <br />
			 <div class="form-group" layout="row">
				<md-input-container class="md-block" flex-gt-sm>
					<ui-select style="width:95%" class="mui-dropdown" placeholder="Pick a country" ng-model="vm.country_selected" ng-disabled="false" title="Pick a country" on-select="vm.calculateExportShipping($select.selected)">
				    <ui-select-match>{{$select.selected.name}}</ui-select-match>
				    <ui-select-choices repeat="country in vm.countries | filter: $select.search">
				      <span ng-bind-html="country.name | highlight: $select.search"></span>
				    </ui-select-choices>
				  </ui-select>
				</md-input-container>
				<md-input-container class="md-block" flex-gt-sm>
					<label>State / Province</label>
					<input ng-model="vm.address.state">
				</md-input-container>
		 	</div>
			<div class="form-group" layout="row">
				<md-input-container class="md-block" flex-gt-sm>
					<label>City</label>
					<input ng-model="vm.address.city" >
				</md-input-container>
				<md-input-container class="md-block" flex-gt-sm>
					<label>Zip Code</label>
					<input ng-model="vm.address.zip_code">
				</md-input-container>
		 	</div>
			 <div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
          			<textarea ng-model="vm.address.address" placeholder="Address details"  md-maxlength="150" rows="5" ></textarea>
				</md-input-container>
			</div>
		 	<div class="form-group">
				<md-input-container class="md-block" flex-gt-sm>
          			<textarea ng-model="vm.address.note" placeholder="Additional comments"  md-maxlength="150" rows="5" ></textarea>
				</md-input-container>
			</div>
		 </div>
	 </div>
 </md-card-content>

 <!-- <div class="center-block text-center">

 	<md-checkbox id="PrivacyPolicy" ng-model="vm.acceptedPrivacyPolicy" aria-label="Privacy Policy">
			
	 </md-checkbox>
	 Leí y acepto las <a href="#" onClick="window.open('politicas-de-privacidad','pagename','resizable,height=600,width=400,left=200,top=50'); return false;">Políticas de Privacidad</a>

 </div> -->
 
 <md-card-actions layout="row" layout-align="center center">
	 <md-button class="pull-left sm-margin-left" ui-sref="checkout.summary">Volver</md-button>
	 <md-button analytics-on="click" analytics-event="CompleteRegistration" class="md-raised md-primary buttons-margin custom" ng-disabled="btnProceed" ng-click="vm.verifyData(vm.pickup_in_store, vm.export)">
		 <span ng-show="!vm.loading_verifyData">Continuar</span>
		 <span ng-show="vm.loading_verifyData"><i class="fa fa-spinner fa-spin"></i></span>
		</md-button>
 </md-card-actions>
</md-card>
